# azure-sgx
## cliffnotes

create 2 machines

* terraform init
* terraform -var="node_count=2" apply --auto-approve

log into 1 of the machines, run ./script.sh in the homedirectory to setup all the sgx + ego requirements

```cd samples/attested_tls
ego-go build server
ego sign server
ego signerid server   <- remember this
ego run server
'''

log into the other machine, run ./script.sh to setup all the sgx and ego requirements

```cd samples/attested_tls
CGO_CFLAGS=-I/opt/ego/include CGO_LDFLAGS=-L/opt/ego/lib go build ra_client/client.go
./client -a <ip of the 1st machine>:8080 -s <signerid taken from above>
```

the output will contain the uniqueid, signerid, productid, debug flags, security version  from the attestation report generated by the server.  
the client verifies that the attestation is legit.  
the client can then decide whether to trust the parameters in the attestation.  
i.e. the productid and signerid should match
